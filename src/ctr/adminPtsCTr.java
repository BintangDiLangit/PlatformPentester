/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ctr;

import DAO.userDAO;
import intrfc.intrfcUser;
import javax.swing.JOptionPane;
import model.Cetak;
import model.user;
import vw.daftarPentester;
import vwAdmin.admin_pentester;

/**
 *
 * @author BintangDiLangit
 */
public class adminPtsCTr extends Cetak {

    private user user;
    private int databaru = 0;
    private intrfcUser intrfcUser;
    private admin_pentester daftarPanel;

    public adminPtsCTr(admin_pentester daftarPanel) {
        this.daftarPanel = daftarPanel;
        intrfcUser = new userDAO();
        user = new user();
        komponen("awal");

    }

    public void komponen(String action) {
        switch (action) {
            case "awal":
                daftarPanel.getBtn_databaru().setEnabled(true);

                break;
            case "segarkan":
                daftarPanel.getBtn_databaru().setEnabled(true);
                daftarPanel.getId().setEnabled(true);
                daftarPanel.getId().setText(null);
                daftarPanel.getNama().setText(null);
                daftarPanel.getEmail().setText(null);
                daftarPanel.getUsernm().setText(null);
                daftarPanel.getPass().setText(null);
                daftarPanel.getIns().setText(null);
                databaru = 0;
                break;
            case "databaru":
                daftarPanel.getBtn_databaru().setEnabled(true);
                daftarPanel.getBtn_databaru().setText("Simpan");
                daftarPanel.getId().setEnabled(false);
                daftarPanel.getId().setText(null);
                daftarPanel.getId().setEnabled(false);
                daftarPanel.getId().setText(null);
                daftarPanel.getNama().setText(null);
                daftarPanel.getEmail().setText(null);
                daftarPanel.getUsernm().setText(null);
                daftarPanel.getIns().setText(null);
                daftarPanel.getPass().setText(null);
                break;

        }
    }

    public void tomboltambah() {

        user.setUserId("PTS" + String.valueOf(intrfcUser.jumlahData() + 1));

        if (databaru == 0) {
            komponen("databaru");
            JOptionPane.showMessageDialog(null, "Masukkan Data");
            databaru = 1;
            daftarPanel.getId().setText(user.getUserId());

        } else {
            user.setUserId(daftarPanel.getId().getText());
            user.setNama(daftarPanel.getNama().getText());
            user.setUserName(daftarPanel.getUsernm().getText());
            user.setPwd(daftarPanel.getPass().getText());
            user.setEmail(daftarPanel.getEmail().getText());
            user.setInstitut(daftarPanel.getIns().getText());

            if (user.getNama().equals("")) {
                warn("Maaf, Nama belum diisi !");
                daftarPanel.getNama().requestFocus();
            } else if (user.getEmail().equals("")) {
                warn("Maaf, Email belum diisi !");
                daftarPanel.getEmail().requestFocus();
            } else if (user.getUserName().equals("")) {
                warn("Maaf, Username belum diisi !");
                daftarPanel.getUsernm().requestFocus();
            } else if (user.getInstitut().equals("")) {
                warn("Maaf, Institusi belum diisi !");
                daftarPanel.getIns().requestFocus();
            } else if (user.getPwd().equals("")) {
                daftarPanel.getPass().requestFocus();
            } else {
                if (intrfcUser.insert(user.getUserId(), user.getUserName(), user.getNama(), user.getPwd(), user.getInstitut(), user.getEmail())) {
                    info("Data Berhasil di tambahkan ");

                    databaru = 0;
                    komponen("segarkan");
                } else {
                    info("Data Gagal di tambahkan ");
                }

            }

        }
    }

    public void tombolhapus() {
        user.setUserId(daftarPanel.getId().getText());
        if (confirmation("Apakah Anda yakin akan menghapus data ini ?")) {
            if (intrfcUser.delete(user.getUserId())) {
                info("Data Telah Di Hapus");
                komponen("segarkan");
            } else {
                info("Data Gagal Di Hapus");
            }
        }
    }
    
    public void tomboledit() {
         user.setUserId(daftarPanel.getId().getText());
            user.setNama(daftarPanel.getNama().getText());
            user.setUserName(daftarPanel.getUsernm().getText());
            user.setPwd(daftarPanel.getPass().getText());
            user.setEmail(daftarPanel.getEmail().getText());
            user.setInstitut(daftarPanel.getIns().getText());

        if (user.getNama().equals("")) {
                warn("Maaf, Nama belum diisi !");
                daftarPanel.getNama().requestFocus();
            } else if (user.getEmail().equals("")) {
                warn("Maaf, Email belum diisi !");
                daftarPanel.getEmail().requestFocus();
            } else if (user.getUserName().equals("")) {
                warn("Maaf, Username belum diisi !");
                daftarPanel.getUsernm().requestFocus();
            } else if (user.getInstitut().equals("")) {
                warn("Maaf, Institusi belum diisi !");
                daftarPanel.getIns().requestFocus();
            } else if (user.getPwd().equals("")) {
                daftarPanel.getPass().requestFocus();
            } else {
                if (intrfcUser.update(user.getUserId(), user.getUserName(), user.getNama(), user.getPwd(), user.getInstitut(), user.getEmail())) {
                    info("Data Berhasil di Update ");

                    databaru = 0;
                    komponen("segarkan");
                } else {
                    info("Data Gagal di Update ");
                }

            }

    }
    
    public void kliktable(){
        daftarPanel.getId().setEnabled(false);
        daftarPanel.getBtn_databaru().setEnabled(false);
        daftarPanel.getBtn_hapus().setEnabled(true);
        daftarPanel.getBtn_ubah().setEnabled(true);
        databaru = 0;
    }
}
