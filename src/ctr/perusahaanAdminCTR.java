/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ctr;

import DAO.perusahaanDAO;
import java.util.List;
import javax.swing.JOptionPane;
import model.Cetak;
import model.perusahaan;
import vwAdmin.admin_perusahaan;

/**
 *
 * @author BintangDiLangit
 */
public class perusahaanAdminCTR extends Cetak {

    private List<perusahaan> list;
    private admin_perusahaan perPanel;
    private perusahaan perusahaan;
    private intrfc.intrfcPerusahaan intrfcPerusahaan;
    private int databaru = 0;

    public perusahaanAdminCTR(admin_perusahaan perPanel) {
        this.perPanel = perPanel;
        intrfcPerusahaan = new perusahaanDAO();
        perusahaan = new perusahaan();
        komponen("awal");

    }

    public void komponen(String action) {
        switch (action) {
            case "awal":
                perPanel.getBtn_cari().setEnabled(true);
                perPanel.getBtn_databaru().setEnabled(true);
                perPanel.getBtn_hapus().setEnabled(false);
                perPanel.getBtn_ubah().setEnabled(false);
                break;
            case "cari":
                perPanel.getBtn_cari().setEnabled(true);
                perPanel.getBtn_databaru().setEnabled(false);
                perPanel.getBtn_hapus().setEnabled(false);
                perPanel.getBtn_ubah().setEnabled(false);
                break;
            case "segarkan":
                perPanel.getBtn_cari().setEnabled(true);
                perPanel.getBtn_databaru().setEnabled(true);
                perPanel.getBtn_hapus().setEnabled(false);
                perPanel.getBtn_ubah().setEnabled(false);
                perPanel.getIdPer().setEnabled(true);
                perPanel.getIdPer().setText(null);
                perPanel.getNamaPer().setText(null);
                perPanel.getNamaPlat().setText(null);
                perPanel.getPass().setText(null);
                perPanel.getEmail().setText(null);
                databaru = 0;
                break;

            case "simpan":
                perPanel.getBtn_cari().setEnabled(true);
                perPanel.getBtn_databaru().setEnabled(true);
                perPanel.getBtn_hapus().setEnabled(false);
                perPanel.getBtn_ubah().setEnabled(false);
                break;

            case "databaru":
                perPanel.getBtn_cari().setEnabled(false);
                perPanel.getBtn_databaru().setEnabled(true);
                perPanel.getBtn_hapus().setEnabled(false);
                perPanel.getBtn_ubah().setEnabled(false);
                perPanel.getIdPer().setEnabled(false);
                perPanel.getIdPer().setText(null);
                perPanel.getNamaPer().setText(null);
                perPanel.getNamaPlat().setText(null);
                perPanel.getPass().setText(null);
                perPanel.getEmail().setText(null);
                perPanel.getBtn_databaru().setText("Simpan");
                break;

        }
    }

    public void tomboltambah() {

        perusahaan.setIdPer("PRS" + String.valueOf(intrfcPerusahaan.jumlahData() + 1));

        if (databaru == 0) {
            komponen("databaru");
            JOptionPane.showMessageDialog(null, "Masukkan Data");
            databaru = 1;
            perPanel.getIdPer().setText(perusahaan.getIdPer());

        } else {
            perusahaan.setIdPer(perPanel.getIdPer().getText());
            perusahaan.setNamap(perPanel.getNamaPer().getText());
            perusahaan.setEmailP(perPanel.getEmail().getText());
            perusahaan.setPasspr(perPanel.getPass().getText());
            perusahaan.setPlatform(perPanel.getNamaPlat().getText());

            if (perusahaan.getNamap().equals("")) {
                warn("Maaf, Nama Buku belum diisi !");
                perPanel.getNamaPer().requestFocus();
            } else if (perusahaan.getEmailP().equals("")) {
                warn("Maaf, Jenis Buku belum diisi !");
                perPanel.getEmail().requestFocus();
            } else if (perusahaan.getPasspr().equals("")) {
                warn("Maaf, Harga Buku belum diisi !");
                perPanel.getPass().requestFocus();
            } else if (perusahaan.getPlatform().equals("")) {
                warn("Maaf, Stok Buku belum diisi !");
                perPanel.getNamaPlat().requestFocus();
            } else {
                if (intrfcPerusahaan.insert(perusahaan.getIdPer(), perusahaan.getNamap(), perusahaan.getEmailP(), perusahaan.getPlatform(), perusahaan.getPasspr())) {
                    info("Data Berhasil di tambahkan ");

                    databaru = 0;
                    komponen("segarkan");
                } else {
                    info("Data Gagal di tambahkan ");
                }

            }

        }
    }

    public void tombolhapus() {
        perusahaan.setIdPer(perPanel.getIdPer().getText());
        if (confirmation("Apakah Anda yakin akan menghapus data ini ?")) {
            if (intrfcPerusahaan.delete(perusahaan.getIdPer())) {
                info("Data Telah Di Hapus");
                komponen("segarkan");
            } else {
                info("Data Gagal Di Hapus");
            }
        }

    }

    public void bersihkan() {
        perPanel.getBtn_cari().setEnabled(true);
        perPanel.getBtn_databaru().setEnabled(true);
        perPanel.getBtn_hapus().setEnabled(false);
        perPanel.getBtn_ubah().setEnabled(false);
        perPanel.getIdPer().setEnabled(true);
        perPanel.getIdPer().setText(null);
        perPanel.getNamaPer().setText(null);
        perPanel.getNamaPlat().setText(null);
        perPanel.getPass().setText(null);
        perPanel.getEmail().setText(null);
        databaru = 0;
    }

    public void tombolrubah() {
        perusahaan.setIdPer(perPanel.getIdPer().getText());
        perusahaan.setNamap(perPanel.getNamaPer().getText());
        perusahaan.setEmailP(perPanel.getEmail().getText());
        perusahaan.setPasspr(perPanel.getPass().getText());
        perusahaan.setPlatform(perPanel.getNamaPlat().getText());

        if (perusahaan.getNamap().equals("")) {
            warn("Maaf, Nama Buku belum diisi !");
            perPanel.getNamaPer().requestFocus();
        } else if (perusahaan.getEmailP().equals("")) {
            warn("Maaf, Jenis Buku belum diisi !");
            perPanel.getEmail().requestFocus();
        } else if (perusahaan.getPasspr().equals("")) {
            warn("Maaf, Harga Buku belum diisi !");
            perPanel.getPass().requestFocus();
        } else if (perusahaan.getPlatform().equals("")) {
            warn("Maaf, Stok Buku belum diisi !");
            perPanel.getNamaPlat().requestFocus();
        } else {
            if (intrfcPerusahaan.update(perusahaan.getIdPer(), perusahaan.getNamap(), perusahaan.getEmailP(), perusahaan.getPlatform(), perusahaan.getPasspr())) {
                info("Data Berhasil di tambahkan ");

                databaru = 0;
                komponen("segarkan");
            } else {
                info("Data Gagal di tambahkan ");
            }

        }

    }

    public void kliktable() {
        perPanel.getIdPer().setEnabled(false);
        perPanel.getBtn_cari().setEnabled(false);
        perPanel.getBtn_databaru().setEnabled(false);
        perPanel.getBtn_hapus().setEnabled(true);
        perPanel.getBtn_ubah().setEnabled(true);
        databaru = 0;
    }

//    public void tombolcari() {
//
//        if (perPanel.getTxt_kodebuku().getText().equals("")) {
//            buku.setKodebuku(null);
//        } else {
//            buku.setKodebuku("%" + perPanel.getTxt_kodebuku().getText() + "%");
//        }
//        if (perPanel.getTxt_nama().getText().equals("")) {
//            buku.setNama(null);
//        } else {
//            buku.setNama("%" + perPanel.getTxt_nama().getText() + "%");
//        }
//        if (perPanel.getTxt_jenis().getText().equals("")) {
//            buku.setJenis(null);
//        } else {
//            buku.setJenis("%" + perPanel.getTxt_jenis().getText() + "%");
//        }
//        if (perPanel.getTxt_harga().getText().equals("")) {
//            buku.setHarga(null);
//        } else {
//            buku.setHarga("%" + perPanel.getTxt_harga().getText() + "%");
//        }
//        if (perPanel.getTxt_stok().getText().equals("")) {
//            buku.setStok(null);
//        } else {
//            buku.setStok("%" + perPanel.getTxt_stok().getText() + "%");
//        }
//
//        list = intrfcBuku.getCari(buku.getKodebuku(), buku.getNama(), buku.getJenis(), buku.getHarga(), buku.getStok());
//        perPanel.getTabelbuku().setModel(new tModBuku(list));
//        info("Data yang di Temukan " + list.size());
//
//        komponen("cari");
//
//    }
}
